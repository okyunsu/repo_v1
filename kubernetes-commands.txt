================================================================================
                        ğŸš€ Kubernetes ëª…ë ¹ì–´ ëª¨ìŒì§‘
================================================================================

ğŸ“‹ ëª©ì°¨:
1. ê¸°ë³¸ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬
2. íŒŒë“œ(Pod) ê´€ë¦¬
3. ì„œë¹„ìŠ¤(Service) ê´€ë¦¬
4. ë°°í¬(Deployment) ê´€ë¦¬
5. HPA (Horizontal Pod Autoscaler) ê´€ë¦¬
6. ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
7. ë¡œê·¸ ë° ë””ë²„ê¹…
8. ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
9. í¬íŠ¸ í¬ì›Œë”©
10. ì„¤ì • íŒŒì¼ ì ìš©
11. ì •ë¦¬ ë° ì‚­ì œ
12. k3d íŠ¹í™” ëª…ë ¹ì–´

================================================================================
1. ğŸ“Š ê¸°ë³¸ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬
================================================================================

# í´ëŸ¬ìŠ¤í„° ì •ë³´ í™•ì¸
kubectl cluster-info

# ë…¸ë“œ ìƒíƒœ í™•ì¸
kubectl get nodes

# í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸
kubectl get componentstatuses

# í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ í™•ì¸
kubectl config current-context

# ì‚¬ìš© ê°€ëŠ¥í•œ ì»¨í…ìŠ¤íŠ¸ ëª©ë¡
kubectl config get-contexts

================================================================================
2. ğŸ—ï¸ íŒŒë“œ(Pod) ê´€ë¦¬
================================================================================

# ëª¨ë“  íŒŒë“œ ì¡°íšŒ
kubectl get pods

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ íŒŒë“œ ì¡°íšŒ
kubectl get pods -n lif-system

# íŒŒë“œ ìƒì„¸ ì •ë³´
kubectl describe pod <pod-name> -n lif-system

# íŒŒë“œ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì‹œ
kubectl get pods -n lif-system -w

# íŠ¹ì • ë¼ë²¨ì˜ íŒŒë“œë§Œ ì¡°íšŒ
kubectl get pods -n lif-system -l app=lif-frontend
kubectl get pods -n lif-system -l app=lif-app

# íŒŒë“œ ì‚­ì œ
kubectl delete pod <pod-name> -n lif-system

# ëª¨ë“  íŒŒë“œ ì‚­ì œ (ë¼ë²¨ ê¸°ì¤€)
kubectl delete pods -n lif-system -l app=lif-frontend

================================================================================
3. ğŸŒ ì„œë¹„ìŠ¤(Service) ê´€ë¦¬
================================================================================

# ëª¨ë“  ì„œë¹„ìŠ¤ ì¡°íšŒ
kubectl get svc

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ì„œë¹„ìŠ¤ ì¡°íšŒ
kubectl get svc -n lif-system

# ì„œë¹„ìŠ¤ ìƒì„¸ ì •ë³´
kubectl describe svc <service-name> -n lif-system

# ì„œë¹„ìŠ¤ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
kubectl get endpoints -n lif-system

================================================================================
4. ğŸš€ ë°°í¬(Deployment) ê´€ë¦¬
================================================================================

# ëª¨ë“  ë°°í¬ ì¡°íšŒ
kubectl get deployments

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ë°°í¬ ì¡°íšŒ
kubectl get deployments -n lif-system

# ë°°í¬ ìƒì„¸ ì •ë³´
kubectl describe deployment <deployment-name> -n lif-system

# ë°°í¬ ìŠ¤ì¼€ì¼ë§
kubectl scale deployment lif-frontend --replicas=3 -n lif-system
kubectl scale deployment lif-app --replicas=5 -n lif-system

# ë°°í¬ ë¡¤ì•„ì›ƒ ìƒíƒœ í™•ì¸
kubectl rollout status deployment/lif-frontend -n lif-system
kubectl rollout status deployment/lif-app -n lif-system

# ë°°í¬ ë¡¤ì•„ì›ƒ íˆìŠ¤í† ë¦¬
kubectl rollout history deployment/lif-frontend -n lif-system

# ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
kubectl rollout undo deployment/lif-frontend -n lif-system

================================================================================
5. ğŸ“ˆ HPA (Horizontal Pod Autoscaler) ê´€ë¦¬
================================================================================

# HPA ìƒíƒœ ì¡°íšŒ
kubectl get hpa

# íŠ¹ì • ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ HPA ì¡°íšŒ
kubectl get hpa -n lif-system

# HPA ìƒì„¸ ì •ë³´
kubectl describe hpa <hpa-name> -n lif-system

# HPA ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
kubectl get hpa -n lif-system -w

# HPA ì‚­ì œ
kubectl delete hpa <hpa-name> -n lif-system

================================================================================
6. ğŸ·ï¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬
================================================================================

# ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì¡°íšŒ
kubectl get namespaces

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
kubectl create namespace <namespace-name>

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ
kubectl delete namespace <namespace-name>

# ê¸°ë³¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„¤ì •
kubectl config set-context --current --namespace=lif-system

================================================================================
7. ğŸ“‹ ë¡œê·¸ ë° ë””ë²„ê¹…
================================================================================

# íŒŒë“œ ë¡œê·¸ ì¡°íšŒ
kubectl logs <pod-name> -n lif-system

# ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¬ë°
kubectl logs -f <pod-name> -n lif-system

# ë°°í¬ì˜ ëª¨ë“  íŒŒë“œ ë¡œê·¸
kubectl logs -f deployment/lif-frontend -n lif-system
kubectl logs -f deployment/lif-app -n lif-system

# ì´ì „ íŒŒë“œì˜ ë¡œê·¸ (í¬ë˜ì‹œëœ ê²½ìš°)
kubectl logs <pod-name> -n lif-system --previous

# íŒŒë“œ ë‚´ë¶€ ì ‘ì† (ë””ë²„ê¹…)
kubectl exec -it <pod-name> -n lif-system -- /bin/bash
kubectl exec -it <pod-name> -n lif-system -- /bin/sh

# íŒŒë“œ ë‚´ë¶€ì—ì„œ ëª…ë ¹ ì‹¤í–‰
kubectl exec <pod-name> -n lif-system -- <command>

================================================================================
8. ğŸ“Š ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§
================================================================================

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
kubectl get all -n lif-system

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ í™•ì¸ (metrics-server í•„ìš”)
kubectl top nodes
kubectl top pods -n lif-system

# ì´ë²¤íŠ¸ ì¡°íšŒ
kubectl get events -n lif-system

# ì´ë²¤íŠ¸ ì‹¤ì‹œê°„ ê°ì‹œ
kubectl get events -n lif-system -w

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ìƒì„¸ ì •ë³´
kubectl describe node <node-name>

================================================================================
9. ğŸ”— í¬íŠ¸ í¬ì›Œë”©
================================================================================

# ì„œë¹„ìŠ¤ í¬íŠ¸ í¬ì›Œë”©
kubectl port-forward -n lif-system svc/lif-frontend 3000:80
kubectl port-forward -n lif-system svc/lif-gateway 8080:80

# íŒŒë“œ í¬íŠ¸ í¬ì›Œë”©
kubectl port-forward -n lif-system <pod-name> 8080:8080

# ê°œë³„ ì„œë¹„ìŠ¤ í¬íŠ¸ í¬ì›Œë”©
kubectl port-forward -n lif-system svc/lif-finance 8000:8000
kubectl port-forward -n lif-system svc/lif-stock 8001:8001
kubectl port-forward -n lif-system svc/lif-esg 8002:8002
kubectl port-forward -n lif-system svc/lif-ratio 8003:8003
kubectl port-forward -n lif-system svc/lif-news 8004:8004
kubectl port-forward -n lif-system svc/lif-pdf 8005:8005

# ë°±ê·¸ë¼ìš´ë“œì—ì„œ í¬íŠ¸ í¬ì›Œë”© (Windows)
start /B kubectl port-forward -n lif-system svc/lif-frontend 3000:80

================================================================================
10. ğŸ“„ ì„¤ì • íŒŒì¼ ì ìš©
================================================================================

# YAML íŒŒì¼ ì ìš©
kubectl apply -f <filename>.yaml

# ë””ë ‰í† ë¦¬ì˜ ëª¨ë“  YAML íŒŒì¼ ì ìš©
kubectl apply -f k8s/

# íŠ¹ì • íŒŒì¼ë“¤ ìˆœì„œëŒ€ë¡œ ì ìš©
kubectl apply -f k8s/namespace.yaml
kubectl apply -f k8s/postgres-configmap.yaml
kubectl apply -f k8s/postgres-pvc.yaml
kubectl apply -f k8s/postgres-deployment.yaml
kubectl apply -f k8s/postgres-service.yaml
kubectl apply -f k8s/app-deployment.yaml
kubectl apply -f k8s/app-service.yaml
kubectl apply -f k8s/app-hpa.yaml
kubectl apply -f k8s/frontend-deployment.yaml
kubectl apply -f k8s/frontend-service.yaml
kubectl apply -f k8s/frontend-hpa.yaml
kubectl apply -f k8s/ingress.yaml

# ì„¤ì • íŒŒì¼ ê²€ì¦ (ì‹¤ì œ ì ìš©í•˜ì§€ ì•ŠìŒ)
kubectl apply -f <filename>.yaml --dry-run=client

# ì„¤ì • íŒŒì¼ ì°¨ì´ì  í™•ì¸
kubectl diff -f <filename>.yaml

================================================================================
11. ğŸ§¹ ì •ë¦¬ ë° ì‚­ì œ
================================================================================

# íŠ¹ì • ë¦¬ì†ŒìŠ¤ ì‚­ì œ
kubectl delete -f <filename>.yaml

# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì‚­ì œ
kubectl delete all --all -n lif-system

# íŠ¹ì • íƒ€ì…ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì‚­ì œ
kubectl delete deployments --all -n lif-system
kubectl delete services --all -n lif-system
kubectl delete hpa --all -n lif-system

# ë¼ë²¨ ê¸°ì¤€ìœ¼ë¡œ ì‚­ì œ
kubectl delete pods -n lif-system -l app=lif-frontend

# ê°•ì œ ì‚­ì œ (ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤)
kubectl delete pod <pod-name> -n lif-system --force --grace-period=0

================================================================================
12. ğŸ³ k3d íŠ¹í™” ëª…ë ¹ì–´
================================================================================

# k3d í´ëŸ¬ìŠ¤í„° ìƒì„±
k3d cluster create modorepo-cluster -p "8080:80@loadbalancer" --agents 1

# k3d í´ëŸ¬ìŠ¤í„° ëª©ë¡
k3d cluster list

# k3d í´ëŸ¬ìŠ¤í„° ì‹œì‘/ì¤‘ì§€
k3d cluster start modorepo-cluster
k3d cluster stop modorepo-cluster

# k3d í´ëŸ¬ìŠ¤í„° ì‚­ì œ
k3d cluster delete modorepo-cluster

# Docker ì´ë¯¸ì§€ë¥¼ k3d í´ëŸ¬ìŠ¤í„°ë¡œ ê°€ì ¸ì˜¤ê¸°
k3d image import lif-app:latest -c modorepo-cluster
k3d image import lif-frontend:latest -c modorepo-cluster

# k3d í´ëŸ¬ìŠ¤í„° ì •ë³´
k3d cluster get modorepo-cluster

================================================================================
13. ğŸ’¡ ìœ ìš©í•œ ì¡°í•© ëª…ë ¹ì–´
================================================================================

# íŒŒë“œ ìƒíƒœì™€ HPAë¥¼ í•¨ê»˜ ëª¨ë‹ˆí„°ë§ (PowerShell)
while ($true) { 
    Clear-Host
    Write-Host "=== íŒŒë“œ ìƒíƒœ ===" -ForegroundColor Green
    kubectl get pods -n lif-system
    Write-Host "`n=== HPA ìƒíƒœ ===" -ForegroundColor Yellow
    kubectl get hpa -n lif-system
    Start-Sleep 3
}

# íŒŒë“œ ê°œìˆ˜ í™•ì¸
kubectl get pods -n lif-system -l app=lif-frontend --no-headers | find /c /v ""
kubectl get pods -n lif-system -l app=lif-app --no-headers | find /c /v ""

# ëª¨ë“  ë¦¬ì†ŒìŠ¤ ìƒíƒœ í•œ ë²ˆì— í™•ì¸
kubectl get pods,svc,hpa,ingress -n lif-system

# íŒŒë“œ ì¬ì‹œì‘ (ë¡¤ë§ ì—…ë°ì´íŠ¸)
kubectl rollout restart deployment/lif-frontend -n lif-system
kubectl rollout restart deployment/lif-app -n lif-system

# ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ê³¼ í•¨ê»˜ íŒŒë“œ ì¡°íšŒ
kubectl get pods -n lif-system -o wide

# JSON í˜•íƒœë¡œ ìƒì„¸ ì •ë³´ ì¶œë ¥
kubectl get pod <pod-name> -n lif-system -o json
kubectl get svc <service-name> -n lif-system -o yaml

================================================================================
14. ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ëª…ë ¹ì–´
================================================================================

# íŒŒë“œê°€ ì‹œì‘ë˜ì§€ ì•Šì„ ë•Œ
kubectl describe pod <pod-name> -n lif-system
kubectl logs <pod-name> -n lif-system
kubectl get events -n lif-system --sort-by='.lastTimestamp'

# ì„œë¹„ìŠ¤ ì—°ê²° ë¬¸ì œ í™•ì¸
kubectl get endpoints -n lif-system
kubectl describe svc <service-name> -n lif-system

# ì´ë¯¸ì§€ í’€ ë¬¸ì œ í™•ì¸
kubectl describe pod <pod-name> -n lif-system | grep -i image

# ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ë¬¸ì œ í™•ì¸
kubectl describe nodes
kubectl top nodes
kubectl top pods -n lif-system

# ë„¤íŠ¸ì›Œí¬ ì—°ê²° í…ŒìŠ¤íŠ¸ (íŒŒë“œ ë‚´ë¶€ì—ì„œ)
kubectl exec -it <pod-name> -n lif-system -- wget -qO- http://lif-gateway/health
kubectl exec -it <pod-name> -n lif-system -- nslookup lif-gateway

================================================================================
15. ğŸ“š ìì£¼ ì‚¬ìš©í•˜ëŠ” í”„ë¡œì íŠ¸ë³„ ëª…ë ¹ì–´
================================================================================

# í˜„ì¬ í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸
kubectl get pods,svc,hpa -n lif-system

# í”„ë¡ íŠ¸ì—”ë“œ ê´€ë ¨
kubectl get pods -n lif-system -l app=lif-frontend
kubectl logs -f deployment/lif-frontend -n lif-system
kubectl scale deployment lif-frontend --replicas=3 -n lif-system

# ë°±ì—”ë“œ ê´€ë ¨
kubectl get pods -n lif-system -l app=lif-app
kubectl logs -f deployment/lif-app -n lif-system
kubectl scale deployment lif-app --replicas=5 -n lif-system

# PostgreSQL ê´€ë ¨
kubectl get pods -n lif-system -l app=postgres
kubectl logs -f deployment/postgres -n lif-system

# ì „ì²´ ì¬ë°°í¬
kubectl rollout restart deployment/lif-frontend -n lif-system
kubectl rollout restart deployment/lif-app -n lif-system

================================================================================
ğŸ’¡ íŒ:
- ëª…ë ¹ì–´ì— --helpë¥¼ ë¶™ì´ë©´ ìƒì„¸í•œ ë„ì›€ë§ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- kubectl get <resource> -o wide ë¡œ ë” ë§ì€ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- kubectl explain <resource> ë¡œ ë¦¬ì†ŒìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- alias k=kubectl ë¡œ ë‹¨ì¶•ì–´ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (Linux/Mac)

================================================================================ 